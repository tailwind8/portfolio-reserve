# ãƒˆãƒƒãƒ—ãƒšãƒ¼ã‚¸ã¨ /booking çµ±åˆè¨ˆç”»

**ä½œæˆæ—¥**: 2026-01-04
**ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹**: ğŸŸ¡ è¨ˆç”»æ®µéšï¼ˆå®Ÿè£…æœªç€æ‰‹ï¼‰
**å„ªå…ˆåº¦**: ä¸­
**è¦‹ç©ã‚‚ã‚Šå·¥æ•°**: 2-3æ™‚é–“

---

## ğŸ“‹ ç›®æ¬¡

1. [èƒŒæ™¯ã¨ç›®çš„](#èƒŒæ™¯ã¨ç›®çš„)
2. [ç¾çŠ¶ã®å•é¡Œç‚¹](#ç¾çŠ¶ã®å•é¡Œç‚¹)
3. [å½±éŸ¿ç®‡æ‰€ã®æ´—ã„å‡ºã—](#å½±éŸ¿ç®‡æ‰€ã®æ´—ã„å‡ºã—)
4. [çµ±åˆä½œæ¥­æ‰‹é †](#çµ±åˆä½œæ¥­æ‰‹é †)
5. [æ³¨æ„ç‚¹ã¨ãƒªã‚¹ã‚¯](#æ³¨æ„ç‚¹ã¨ãƒªã‚¹ã‚¯)
6. [ãƒ†ã‚¹ãƒˆè¨ˆç”»](#ãƒ†ã‚¹ãƒˆè¨ˆç”»)
7. [ãƒ­ãƒ¼ãƒ«ãƒãƒƒã‚¯æ‰‹é †](#ãƒ­ãƒ¼ãƒ«ãƒãƒƒã‚¯æ‰‹é †)

---

## ğŸ¯ èƒŒæ™¯ã¨ç›®çš„

### å®Ÿæ–½æ¸ˆã¿ã®ä½œæ¥­ï¼ˆ2026-01-04ï¼‰

1. **ãƒˆãƒƒãƒ—ãƒšãƒ¼ã‚¸ï¼ˆ`/`ï¼‰ã‚’äºˆç´„ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ã«å¤‰æ›´**
   - æ—§ãƒˆãƒƒãƒ—ãƒšãƒ¼ã‚¸ï¼ˆãƒãƒ¼ãƒˆãƒ•ã‚©ãƒªã‚ªè§£èª¬ï¼‰ã‚’ `/help` ã«ç§»å‹•
   - ãƒˆãƒƒãƒ—ãƒšãƒ¼ã‚¸ã‚’ `/booking` ã¨åŒã˜äºˆç´„ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ç”»é¢ã«å¤‰æ›´

2. **ç¾çŠ¶ã®å•é¡Œ**
   - ãƒˆãƒƒãƒ—ãƒšãƒ¼ã‚¸ï¼ˆ`/`ï¼‰ã¨ `/booking` ãŒåŒã˜å†…å®¹ã§å…±å­˜ã—ã¦ã„ã‚‹
   - ãƒ¦ãƒ¼ã‚¶ãƒ¼ä½“é¨“ã¨ã—ã¦é•å’Œæ„ŸãŒã‚ã‚‹
   - ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹ã‚³ã‚¹ãƒˆãŒäºŒé‡ã«ã‹ã‹ã‚‹

### çµ±åˆã®ç›®çš„

- **UXæ”¹å–„**: ãƒˆãƒƒãƒ—ãƒšãƒ¼ã‚¸ãŒå³åº§ã«äºˆç´„ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ã«ãªã‚Šã€1ã‚¯ãƒªãƒƒã‚¯å‰Šæ¸›
- **ä¿å®ˆæ€§å‘ä¸Š**: åŒã˜ã‚³ãƒ¼ãƒ‰ãŒ2ç®‡æ‰€ã«å­˜åœ¨ã™ã‚‹çŠ¶æ…‹ã‚’è§£æ¶ˆ
- **ã‚·ãƒ³ãƒ—ãƒ«åŒ–**: `/booking` ã¸ã®é·ç§»ã‚’ `/` ã«çµ±ä¸€

---

## ğŸ” ç¾çŠ¶ã®å•é¡Œç‚¹

### ãƒ•ã‚¡ã‚¤ãƒ«æ§‹é€ 

```
src/app/
â”œâ”€â”€ page.tsx              # ãƒˆãƒƒãƒ—ãƒšãƒ¼ã‚¸ï¼ˆäºˆç´„ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ï¼‰
â”œâ”€â”€ booking/
â”‚   â””â”€â”€ page.tsx          # äºˆç´„ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ï¼ˆåŒã˜å†…å®¹ï¼‰â˜…å‰Šé™¤å¯¾è±¡
â””â”€â”€ help/
    â””â”€â”€ page.tsx          # ãƒãƒ¼ãƒˆãƒ•ã‚©ãƒªã‚ªè§£èª¬ï¼ˆæ–°è¦ä½œæˆæ¸ˆã¿ï¼‰
```

### URLæ§‹é€ 

| URL | å†…å®¹ | çŠ¶æ…‹ |
|-----|------|------|
| `/` | äºˆç´„ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ | âœ… ä¿æŒ |
| `/booking` | äºˆç´„ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ï¼ˆåŒã˜ï¼‰ | âŒ å‰Šé™¤äºˆå®š |
| `/help` | ãƒãƒ¼ãƒˆãƒ•ã‚©ãƒªã‚ªè§£èª¬ | âœ… æ–°è¦ä½œæˆæ¸ˆã¿ |

---

## ğŸ“Š å½±éŸ¿ç®‡æ‰€ã®æ´—ã„å‡ºã—

### 1. **ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆå†…ã®ãƒªãƒ³ã‚¯**ï¼ˆ2ç®‡æ‰€ï¼‰

#### Header ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
**ãƒ•ã‚¡ã‚¤ãƒ«**: `reserve-app/src/components/Header.tsx:18`
```tsx
// Before
<Link href="/booking" className="...">

// After
<Link href="/" className="...">
```

#### Footer ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
**ãƒ•ã‚¡ã‚¤ãƒ«**: `reserve-app/src/components/Footer.tsx:24`
```tsx
// Before
<Link href="/booking" className="...">

// After
<Link href="/" className="...">
```

---

### 2. **ãƒšãƒ¼ã‚¸å†…ã®ãƒªãƒ³ã‚¯**ï¼ˆ2ç®‡æ‰€ï¼‰

#### Help ãƒšãƒ¼ã‚¸
**ãƒ•ã‚¡ã‚¤ãƒ«**: `reserve-app/src/app/help/page.tsx:26`
```tsx
// Before
<Link href="/booking">ä»Šã™ãäºˆç´„ã™ã‚‹</Link>

// After
<Link href="/">ä»Šã™ãäºˆç´„ã™ã‚‹</Link>
```

#### Menus ãƒšãƒ¼ã‚¸ï¼ˆé‡è¦ï¼šã‚¯ã‚¨ãƒªãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ä»˜ãï¼‰
**ãƒ•ã‚¡ã‚¤ãƒ«**: `reserve-app/src/app/menus/page.tsx:114`
```tsx
// Before
<Link href={`/booking?menuId=${menu.id}`}>

// After
<Link href={`/?menuId=${menu.id}`}>
```

**æ³¨æ„**: ãƒˆãƒƒãƒ—ãƒšãƒ¼ã‚¸ã¯æ—¢ã« `useSearchParams()` ã§ `menuId` ã‚’å–å¾—ã™ã‚‹å®Ÿè£…æ¸ˆã¿ âœ…

---

### 3. **E2Eãƒ†ã‚¹ãƒˆ**ï¼ˆ20+ç®‡æ‰€ï¼‰

#### Page Object ãƒ‘ã‚¿ãƒ¼ãƒ³ï¼ˆæœ€é‡è¦ï¼‰
**ãƒ•ã‚¡ã‚¤ãƒ«**: `reserve-app/src/__tests__/e2e/pages/BookingPage.ts`

```typescript
// Before
async goto() {
  await this.page.goto('/booking');
}

async gotoWithParams(params: { menuId?: string; staffId?: string }) {
  const queryString = new URLSearchParams();
  if (params.menuId) queryString.set('menuId', params.menuId);
  if (params.staffId) queryString.set('staffId', params.staffId);
  await this.page.goto(`/booking?${queryString}`);
}

// After
async goto() {
  await this.page.goto('/');
}

async gotoWithParams(params: { menuId?: string; staffId?: string }) {
  const queryString = new URLSearchParams();
  if (params.menuId) queryString.set('menuId', params.menuId);
  if (params.staffId) queryString.set('staffId', params.staffId);
  await this.page.goto(`/?${queryString}`);
}
```

**é‡è¦**: BookingPage Page Object ã‚’ä¿®æ­£ã™ã‚Œã°ã€ä»¥ä¸‹ã®ãƒ†ã‚¹ãƒˆãŒè‡ªå‹•çš„ã«å¯¾å¿œã•ã‚Œã‚‹ï¼š
- `booking.spec.ts`
- `booking-cancel.spec.ts`
- `booking-update.spec.ts`
- `booking-concurrency.spec.ts`
- `booking-period-settings.spec.ts`
- `booking-weekly-calendar.spec.ts`
- `boundary-values.spec.ts`
- `network-errors.spec.ts`
- `status-transition.spec.ts`
- ãã®ä»–å¤šæ•°

#### ç›´æ¥ã‚¢ã‚¯ã‚»ã‚¹ã—ã¦ã„ã‚‹ãƒ†ã‚¹ãƒˆï¼ˆè¦å€‹åˆ¥ä¿®æ­£ï¼‰

**ãƒ•ã‚¡ã‚¤ãƒ«**: `reserve-app/src/__tests__/e2e/admin-blocked-times.spec.ts:78,204`
```typescript
// Before
await page.goto('/booking');

// After
await page.goto('/');
```

**ãƒ•ã‚¡ã‚¤ãƒ«**: `reserve-app/src/__tests__/e2e/session-management.spec.ts:92`
```typescript
// Before
await page.goto('/booking');

// After
await page.goto('/');
```

**ãƒ•ã‚¡ã‚¤ãƒ«**: `reserve-app/src/__tests__/e2e/xss-csrf.spec.ts:363`
```typescript
// Before
await page.goto('/login?redirect=/booking');

// After
await page.goto('/login?redirect=/');
```

---

### 4. **Middleware**ï¼ˆå¤‰æ›´ä¸è¦ï¼‰

**ãƒ•ã‚¡ã‚¤ãƒ«**: `reserve-app/src/middleware.ts:185`
```typescript
const protectedPaths = ['/mypage', '/booking/confirm', '/reservations'];
```

**ç¾çŠ¶**: `/booking` è‡ªä½“ã¯ä¿è­·ã•ã‚Œã¦ã„ãªã„ï¼ˆå…¬é–‹ãƒšãƒ¼ã‚¸ï¼‰
**åˆ¤æ–­**: `/booking/confirm` ã®ã¿ä¿è­·ã•ã‚Œã¦ã„ã‚‹ãŸã‚ã€**å¤‰æ›´ä¸è¦** âœ…

---

### 5. **ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ**ï¼ˆè¦æ›´æ–°ï¼‰

ä»¥ä¸‹ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã§ `/booking` ãŒè¨€åŠã•ã‚Œã¦ã„ã¾ã™ï¼š

- `documents/issues-proposal-system-settings.md`
- `documents/development/é–‹ç™ºãƒ—ãƒ­ã‚»ã‚¹è¨­è¨ˆ.md`
- `documents/ã‚³ãƒ¼ãƒ‰å“è³ªãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ.md`
- `documents/handover/2026-01-03_admin-weekly-calendar-red.md`
- `documents/Phase2-3-ã‚¹ãƒ¼ãƒ‘ãƒ¼adminæ©Ÿèƒ½å®Ÿè£….md`
- `documents/ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆä¸è¶³ç‚¹åˆ†æãƒ¬ãƒãƒ¼ãƒˆ.md`
- `documents/é–‹ç™ºãƒ—ãƒ­ã‚»ã‚¹æ”¹å–„ææ¡ˆ.md`

**å¯¾å¿œ**: çµ±åˆå¾Œã«ä¸€æ‹¬ã§ `/booking` â†’ `/` ã«ç½®æ›

---

### 6. **home.spec.ts ã®æ‰±ã„**

**ãƒ•ã‚¡ã‚¤ãƒ«**: `reserve-app/src/__tests__/e2e/home.spec.ts`

**ç¾çŠ¶**:
- æ—§ãƒˆãƒƒãƒ—ãƒšãƒ¼ã‚¸ï¼ˆãƒãƒ¼ãƒˆãƒ•ã‚©ãƒªã‚ªè§£èª¬ï¼‰ã®ãƒ†ã‚¹ãƒˆ
- ç¾åœ¨ã®ãƒˆãƒƒãƒ—ãƒšãƒ¼ã‚¸ï¼ˆäºˆç´„ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ï¼‰ã¨ãƒŸã‚¹ãƒãƒƒãƒ

**å¯¾å¿œæ¡ˆ**:
- **Option A**: `/help` ãƒšãƒ¼ã‚¸ã®ãƒ†ã‚¹ãƒˆã«æ›¸ãæ›ãˆ
- **Option B**: å‰Šé™¤ï¼ˆ`booking.spec.ts` ã§äºˆç´„ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ã¯æ—¢ã«ã‚«ãƒãƒ¼æ¸ˆã¿ï¼‰

**æ¨å¥¨**: Option Bï¼ˆå‰Šé™¤ï¼‰- äºˆç´„ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ã®ãƒ†ã‚¹ãƒˆã¯ `booking.spec.ts` ã§ååˆ†

---

## ğŸ”§ çµ±åˆä½œæ¥­æ‰‹é †

### Phase 1: ãƒªãƒ³ã‚¯å¤‰æ›´ï¼ˆ5ç®‡æ‰€ï¼‰

```bash
# 1. Header ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
src/components/Header.tsx:18
  /booking â†’ /

# 2. Footer ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
src/components/Footer.tsx:24
  /booking â†’ /

# 3. Help ãƒšãƒ¼ã‚¸
src/app/help/page.tsx:26
  /booking â†’ /

# 4. Menus ãƒšãƒ¼ã‚¸ï¼ˆã‚¯ã‚¨ãƒªãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ä¿æŒï¼‰
src/app/menus/page.tsx:114
  /booking?menuId=... â†’ /?menuId=...
```

### Phase 2: E2Eãƒ†ã‚¹ãƒˆä¿®æ­£

#### 2-1. Page Object ä¿®æ­£ï¼ˆæœ€å„ªå…ˆï¼‰
```bash
# BookingPage Page Object ã‚’ä¿®æ­£
src/__tests__/e2e/pages/BookingPage.ts
  goto() ãƒ¡ã‚½ãƒƒãƒ‰: /booking â†’ /
  gotoWithParams() ãƒ¡ã‚½ãƒƒãƒ‰: /booking â†’ /
```

#### 2-2. ç›´æ¥ã‚¢ã‚¯ã‚»ã‚¹ã—ã¦ã„ã‚‹ãƒ†ã‚¹ãƒˆä¿®æ­£
```bash
# admin-blocked-times.spec.ts
src/__tests__/e2e/admin-blocked-times.spec.ts:78,204
  page.goto('/booking') â†’ page.goto('/')

# session-management.spec.ts
src/__tests__/e2e/session-management.spec.ts:92
  page.goto('/booking') â†’ page.goto('/')

# xss-csrf.spec.ts
src/__tests__/e2e/xss-csrf.spec.ts:363
  redirect=/booking â†’ redirect=/
```

#### 2-3. home.spec.ts ã®å‰Šé™¤
```bash
rm src/__tests__/e2e/home.spec.ts
rm src/__tests__/e2e/pages/HomePage.ts
```

### Phase 3: ãƒ•ã‚¡ã‚¤ãƒ«å‰Šé™¤

```bash
# /booking ãƒšãƒ¼ã‚¸ã‚’å‰Šé™¤
rm -rf src/app/booking/
```

### Phase 4: next.config.js ã«ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆè¿½åŠ ï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰

æ—¢å­˜ã®ãƒ–ãƒƒã‚¯ãƒãƒ¼ã‚¯ã‚„SEOå¯¾ç­–ã®ãŸã‚ã€ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆè¨­å®šã‚’è¿½åŠ ï¼š

```typescript
// reserve-app/next.config.ts
const nextConfig = {
  // ...æ—¢å­˜è¨­å®š
  async redirects() {
    return [
      {
        source: '/booking',
        destination: '/',
        permanent: true, // 301ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆ
      },
    ];
  },
};
```

### Phase 5: ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ

```bash
cd reserve-app

# Lint ãƒã‚§ãƒƒã‚¯
npm run lint

# ãƒ“ãƒ«ãƒ‰ãƒ†ã‚¹ãƒˆ
DATABASE_URL="postgresql://dummy:dummy@localhost:5432/dummy" npm run build:ci

# E2Eãƒ†ã‚¹ãƒˆï¼ˆã‚¹ãƒ¢ãƒ¼ã‚¯ãƒ†ã‚¹ãƒˆï¼‰
npm run test:e2e:smoke

# å…¨E2Eãƒ†ã‚¹ãƒˆ
npm run test:e2e
```

### Phase 6: ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆæ›´æ–°

```bash
# documents/ é…ä¸‹ã®Markdownãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä¸€æ‹¬ç½®æ›
cd documents
grep -rl "/booking" . --include="*.md" | xargs sed -i '' 's/\/booking/\//g'

# æ‰‹å‹•ç¢ºèªãŒå¿…è¦ãªãƒ•ã‚¡ã‚¤ãƒ«
# - issues-proposal-system-settings.md
# - development/é–‹ç™ºãƒ—ãƒ­ã‚»ã‚¹è¨­è¨ˆ.md
# - ã‚³ãƒ¼ãƒ‰å“è³ªãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ.md
# - handover/2026-01-03_admin-weekly-calendar-red.md
# - Phase2-3-ã‚¹ãƒ¼ãƒ‘ãƒ¼adminæ©Ÿèƒ½å®Ÿè£….md
```

---

## âš ï¸ æ³¨æ„ç‚¹ã¨ãƒªã‚¹ã‚¯

### 1. **ã‚¯ã‚¨ãƒªãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã®ä¿æŒ**

**é‡è¦**: ãƒ¡ãƒ‹ãƒ¥ãƒ¼ãƒšãƒ¼ã‚¸ã‹ã‚‰ã®é·ç§»ã§ `menuId` ãŒæ¸¡ã•ã‚Œã‚‹

**ç¢ºèªæ¸ˆã¿äº‹é …**:
- âœ… ãƒˆãƒƒãƒ—ãƒšãƒ¼ã‚¸ï¼ˆ`page.tsx`ï¼‰ã¯æ—¢ã« `useSearchParams()` ã§ `menuId` ã‚’å–å¾—ã™ã‚‹å®Ÿè£…æ¸ˆã¿
- âœ… `/?menuId=xxx` ã®å½¢å¼ã§å‹•ä½œã™ã‚‹ã“ã¨ã‚’ç¢ºèª

### 2. **æ—¢å­˜ã®ãƒ–ãƒƒã‚¯ãƒãƒ¼ã‚¯ãƒ»å¤–éƒ¨ãƒªãƒ³ã‚¯å¯¾ç­–**

**ãƒªã‚¹ã‚¯**: ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒ `/booking` ã‚’ãƒ–ãƒƒã‚¯ãƒãƒ¼ã‚¯ã—ã¦ã„ã‚‹å¯èƒ½æ€§

**å¯¾ç­–**:
- `next.config.ts` ã§ `/booking` â†’ `/` ã®301ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆã‚’è¨­å®šï¼ˆæ¨å¥¨ï¼‰
- ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆã«ã‚ˆã‚Šã€æ—¢å­˜ã®ãƒ–ãƒƒã‚¯ãƒãƒ¼ã‚¯ã‚‚æ©Ÿèƒ½ã—ç¶šã‘ã‚‹

### 3. **E2Eãƒ†ã‚¹ãƒˆã®å½±éŸ¿ç¯„å›²ãŒå¤§ãã„**

**ãƒªã‚¹ã‚¯**: ç´„20å€‹ã®ãƒ†ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ã«å½±éŸ¿

**å¯¾ç­–**:
- Page Object ãƒ‘ã‚¿ãƒ¼ãƒ³ã§å¤§éƒ¨åˆ†ã¯è‡ªå‹•å¯¾å¿œ
- ç›´æ¥ `page.goto('/booking')` ã‚’ä½¿ç”¨ã—ã¦ã„ã‚‹ãƒ†ã‚¹ãƒˆã¯å€‹åˆ¥ä¿®æ­£
- ãƒ†ã‚¹ãƒˆå®Ÿè¡Œã‚’æ®µéšçš„ã«è¡Œã†ï¼ˆsmoke â†’ å…¨ä½“ï¼‰

### 4. **SEO ã¸ã®å½±éŸ¿**

**ç¾çŠ¶**: `/booking` ã¨ `/` ãŒåŒã˜ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚’æä¾›ã—ã¦ã„ã‚‹ï¼ˆé‡è¤‡ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ï¼‰

**çµ±åˆå¾Œ**:
- `/` ã®ã¿ãŒæ­£è¦URLã¨ãªã‚Šã€SEOçš„ã«æ”¹å–„ã•ã‚Œã‚‹
- `/booking` â†’ `/` ã®301ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆã§ãƒªãƒ³ã‚¯ã‚¸ãƒ¥ãƒ¼ã‚¹ã‚’å¼•ãç¶™ã

### 5. **Middleware ã®ä¿è­·ãƒ‘ã‚¹**

**ç¢ºèªæ¸ˆã¿**: `/booking/confirm` ã®ã¿ä¿è­·ã•ã‚Œã¦ãŠã‚Šã€`/booking` è‡ªä½“ã¯ä¿è­·ã•ã‚Œã¦ã„ãªã„

**å½±éŸ¿**: ãªã—ï¼ˆå¤‰æ›´ä¸è¦ï¼‰

---

## ğŸ§ª ãƒ†ã‚¹ãƒˆè¨ˆç”»

### 1. **å˜ä½“ãƒ†ã‚¹ãƒˆ**
- ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆï¼ˆHeader, Footerï¼‰ã®ãƒªãƒ³ã‚¯å…ˆç¢ºèª
- `npm test` ã§æ—¢å­˜ã®ãƒ†ã‚¹ãƒˆãŒé€šã‚‹ã“ã¨ã‚’ç¢ºèª

### 2. **E2Eãƒ†ã‚¹ãƒˆ**

#### ã‚¹ãƒ¢ãƒ¼ã‚¯ãƒ†ã‚¹ãƒˆï¼ˆå¿…é ˆï¼‰
```bash
npm run test:e2e:smoke
```

**ç¢ºèªé …ç›®**:
- ãƒˆãƒƒãƒ—ãƒšãƒ¼ã‚¸ï¼ˆ`/`ï¼‰ãŒæ­£ã—ããƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã•ã‚Œã‚‹
- äºˆç´„ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ãŒæ©Ÿèƒ½ã™ã‚‹
- ãƒ¡ãƒ‹ãƒ¥ãƒ¼ãƒšãƒ¼ã‚¸ã‹ã‚‰ã®é·ç§»ï¼ˆ`?menuId=xxx`ï¼‰ãŒæ©Ÿèƒ½ã™ã‚‹

#### å…¨E2Eãƒ†ã‚¹ãƒˆ
```bash
npm run test:e2e
```

**ç¢ºèªé …ç›®**:
- äºˆç´„ãƒ•ãƒ­ãƒ¼å…¨ä½“
- äºˆç´„ã‚­ãƒ£ãƒ³ã‚»ãƒ«ãƒ»æ›´æ–°
- é€±é–“ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼è¡¨ç¤º
- åŒæ™‚äºˆç´„åˆ¶å¾¡
- ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ†ã‚¹ãƒˆï¼ˆXSS/CSRFï¼‰
- ã‚»ãƒƒã‚·ãƒ§ãƒ³ç®¡ç†

### 3. **æ‰‹å‹•ãƒ†ã‚¹ãƒˆ**

#### å¿…é ˆã‚·ãƒŠãƒªã‚ª
1. **ãƒˆãƒƒãƒ—ãƒšãƒ¼ã‚¸ã‚¢ã‚¯ã‚»ã‚¹**
   - http://localhost:3000 ã«ã‚¢ã‚¯ã‚»ã‚¹
   - äºˆç´„ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ãŒè¡¨ç¤ºã•ã‚Œã‚‹ã“ã¨ã‚’ç¢ºèª

2. **ãƒ¡ãƒ‹ãƒ¥ãƒ¼ãƒšãƒ¼ã‚¸ã‹ã‚‰ã®é·ç§»**
   - http://localhost:3000/menus ã«ã‚¢ã‚¯ã‚»ã‚¹
   - ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã‚’ã‚¯ãƒªãƒƒã‚¯
   - ãƒˆãƒƒãƒ—ãƒšãƒ¼ã‚¸ï¼ˆ`/`ï¼‰ã« `menuId` ä»˜ãã§é·ç§»ã™ã‚‹ã“ã¨ã‚’ç¢ºèª
   - ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ã§ãƒ¡ãƒ‹ãƒ¥ãƒ¼ãŒäº‹å‰é¸æŠã•ã‚Œã¦ã„ã‚‹ã“ã¨ã‚’ç¢ºèª

3. **ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆç¢ºèª**ï¼ˆãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆè¨­å®šã‚’è¿½åŠ ã—ãŸå ´åˆï¼‰
   - http://localhost:3000/booking ã«ã‚¢ã‚¯ã‚»ã‚¹
   - http://localhost:3000/ ã«ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆã•ã‚Œã‚‹ã“ã¨ã‚’ç¢ºèª

4. **ãƒ˜ãƒƒãƒ€ãƒ¼ãƒ»ãƒ•ãƒƒã‚¿ãƒ¼ã®ãƒªãƒ³ã‚¯**
   - ãƒ˜ãƒƒãƒ€ãƒ¼ã®ã€Œäºˆç´„ã€ãƒªãƒ³ã‚¯ã‚’ã‚¯ãƒªãƒƒã‚¯ â†’ `/` ã«é·ç§»
   - ãƒ•ãƒƒã‚¿ãƒ¼ã®ã€Œäºˆç´„ã€ãƒªãƒ³ã‚¯ã‚’ã‚¯ãƒªãƒƒã‚¯ â†’ `/` ã«é·ç§»

### 4. **ãƒ“ãƒ«ãƒ‰ãƒ†ã‚¹ãƒˆ**

```bash
DATABASE_URL="postgresql://dummy:dummy@localhost:5432/dummy" npm run build:ci
```

**ç¢ºèªé …ç›®**:
- ãƒ“ãƒ«ãƒ‰ã‚¨ãƒ©ãƒ¼ãŒãªã„ã“ã¨
- å‹ã‚¨ãƒ©ãƒ¼ãŒãªã„ã“ã¨
- `/booking` ãƒ«ãƒ¼ãƒˆãŒå‰Šé™¤ã•ã‚Œã¦ã„ã‚‹ã“ã¨
- `/` ãƒ«ãƒ¼ãƒˆãŒæ­£ã—ãç”Ÿæˆã•ã‚Œã¦ã„ã‚‹ã“ã¨

---

## ğŸ”„ ãƒ­ãƒ¼ãƒ«ãƒãƒƒã‚¯æ‰‹é †

ä¸‡ãŒä¸€ã€å•é¡ŒãŒç™ºç”Ÿã—ãŸå ´åˆã®ãƒ­ãƒ¼ãƒ«ãƒãƒƒã‚¯æ‰‹é †ï¼š

### Git ã§æˆ»ã™å ´åˆ

```bash
# ä½œæ¥­å‰ã®ã‚³ãƒŸãƒƒãƒˆãƒãƒƒã‚·ãƒ¥ã‚’ç¢ºèª
git log --oneline

# ãƒ­ãƒ¼ãƒ«ãƒãƒƒã‚¯
git revert <commit-hash>
```

### æ‰‹å‹•ã§æˆ»ã™å ´åˆ

#### 1. `/booking` ãƒšãƒ¼ã‚¸ã‚’å¾©å…ƒ
```bash
# ãƒˆãƒƒãƒ—ãƒšãƒ¼ã‚¸ã®å†…å®¹ã‚’ /booking ã«ã‚³ãƒ”ãƒ¼
cp src/app/page.tsx src/app/booking/page.tsx
```

#### 2. ãƒªãƒ³ã‚¯ã‚’å…ƒã«æˆ»ã™
```bash
# Header, Footer, Help, Menus ã®å„ãƒ•ã‚¡ã‚¤ãƒ«ã§
# / â†’ /booking ã«æˆ»ã™
```

#### 3. E2Eãƒ†ã‚¹ãƒˆã‚’å…ƒã«æˆ»ã™
```bash
# BookingPage Page Object ã§
# / â†’ /booking ã«æˆ»ã™
```

#### 4. next.config.ts ã®ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆå‰Šé™¤
```typescript
// redirects() é–¢æ•°ã‚’å‰Šé™¤ã¾ãŸã¯ã‚³ãƒ¡ãƒ³ãƒˆã‚¢ã‚¦ãƒˆ
```

---

## ğŸ“ ä½œæ¥­å®Œäº†ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ

### å®Ÿè£…å‰

- [ ] ã“ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’ç†Ÿèª­
- [ ] å½±éŸ¿ç®‡æ‰€ã‚’å†ç¢ºèª
- [ ] ä½œæ¥­ç”¨ãƒ–ãƒ©ãƒ³ãƒã‚’ä½œæˆï¼ˆ`feature/integrate-booking-to-home`ï¼‰

### Phase 1: ãƒªãƒ³ã‚¯å¤‰æ›´

- [ ] `src/components/Header.tsx` ä¿®æ­£
- [ ] `src/components/Footer.tsx` ä¿®æ­£
- [ ] `src/app/help/page.tsx` ä¿®æ­£
- [ ] `src/app/menus/page.tsx` ä¿®æ­£

### Phase 2: E2Eãƒ†ã‚¹ãƒˆä¿®æ­£

- [ ] `src/__tests__/e2e/pages/BookingPage.ts` ä¿®æ­£
- [ ] `src/__tests__/e2e/admin-blocked-times.spec.ts` ä¿®æ­£
- [ ] `src/__tests__/e2e/session-management.spec.ts` ä¿®æ­£
- [ ] `src/__tests__/e2e/xss-csrf.spec.ts` ä¿®æ­£
- [ ] `src/__tests__/e2e/home.spec.ts` å‰Šé™¤
- [ ] `src/__tests__/e2e/pages/HomePage.ts` å‰Šé™¤

### Phase 3: ãƒ•ã‚¡ã‚¤ãƒ«å‰Šé™¤

- [ ] `src/app/booking/page.tsx` å‰Šé™¤

### Phase 4: ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆè¨­å®šï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰

- [ ] `next.config.ts` ã«ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆè¿½åŠ 

### Phase 5: ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ

- [ ] `npm run lint` â†’ ã‚¨ãƒ©ãƒ¼0ä»¶
- [ ] `npm run build:ci` â†’ ãƒ“ãƒ«ãƒ‰æˆåŠŸ
- [ ] `npm run test:e2e:smoke` â†’ æˆåŠŸ
- [ ] `npm run test:e2e` â†’ æˆåŠŸ

### Phase 6: ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆæ›´æ–°

- [ ] `documents/` é…ä¸‹ã®Markdownãƒ•ã‚¡ã‚¤ãƒ«æ›´æ–°
- [ ] æ‰‹å‹•ç¢ºèªãŒå¿…è¦ãªãƒ•ã‚¡ã‚¤ãƒ«ã‚’å€‹åˆ¥ç¢ºèª

### å®Œäº†å¾Œ

- [ ] PRä½œæˆ
- [ ] ã‚³ãƒ¼ãƒ‰ãƒ¬ãƒ“ãƒ¥ãƒ¼ä¾é ¼
- [ ] ãƒãƒ¼ã‚¸

---

## ğŸ“ å‚è€ƒæƒ…å ±

### é–¢é€£Issueãƒ»PR

- ãªã—ï¼ˆæ–°è¦ã‚¿ã‚¹ã‚¯ï¼‰

### é–¢é€£ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ

- `documents/basic/æ©Ÿèƒ½ä¸€è¦§ã¨ãƒšãƒ¼ã‚¸è¨­è¨ˆ.md` - ãƒšãƒ¼ã‚¸æ§‹æˆ
- `documents/development/é–‹ç™ºãƒ—ãƒ­ã‚»ã‚¹è¨­è¨ˆ.md` - ãƒ†ã‚¹ãƒˆæˆ¦ç•¥
- `.cursor/rules/é–‹ç™ºãƒ—ãƒ­ã‚»ã‚¹ãƒ«ãƒ¼ãƒ«.md` - é–‹ç™ºãƒ«ãƒ¼ãƒ«

### ã‚³ãƒŸãƒƒãƒˆãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ä¾‹

```bash
# Phase 1
git commit -m "refactor: /booking ã¸ã®ãƒªãƒ³ã‚¯ã‚’ / ã«çµ±ä¸€

- Header, Footer, Help, Menus ã®ãƒªãƒ³ã‚¯å…ˆã‚’å¤‰æ›´
- ãƒ¡ãƒ‹ãƒ¥ãƒ¼ãƒšãƒ¼ã‚¸ã‹ã‚‰ã®é·ç§»ã§ã‚¯ã‚¨ãƒªãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’ä¿æŒ"

# Phase 2
git commit -m "test: E2Eãƒ†ã‚¹ãƒˆã® /booking å‚ç…§ã‚’ / ã«å¤‰æ›´

- BookingPage Page Object ã‚’ä¿®æ­£
- ç›´æ¥å‚ç…§ã—ã¦ã„ã‚‹ãƒ†ã‚¹ãƒˆã‚’å€‹åˆ¥ä¿®æ­£
- home.spec.ts ã‚’å‰Šé™¤ï¼ˆäºˆç´„ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ã¯ booking.spec.ts ã§ã‚«ãƒãƒ¼æ¸ˆã¿ï¼‰"

# Phase 3
git commit -m "refactor: /booking ãƒšãƒ¼ã‚¸ã‚’å‰Šé™¤ã—ã¦ãƒˆãƒƒãƒ—ãƒšãƒ¼ã‚¸ã«çµ±åˆ

- src/app/booking/page.tsx ã‚’å‰Šé™¤
- next.config.ts ã«ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆè¨­å®šã‚’è¿½åŠ "

# Phase 4ï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰
git commit -m "docs: /booking â†’ / çµ±åˆã«ä¼´ã†ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆæ›´æ–°"
```

---

## ğŸ‘¥ ä½œæ¥­æ‹…å½“

**å®Ÿè£…è€…**: ï¼ˆæœªå®šï¼‰
**ãƒ¬ãƒ“ãƒ¥ãƒ¼è€…**: ï¼ˆæœªå®šï¼‰
**è¦‹ç©ã‚‚ã‚Šå·¥æ•°**: 2-3æ™‚é–“

---

**æœ€çµ‚æ›´æ–°**: 2026-01-04
