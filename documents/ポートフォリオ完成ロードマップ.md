# ポートフォリオ完成 + 販売準備ロードマップ

**最終更新**: 2026-01-01
**戦略**: ポートフォリオとして完成させつつ、将来の販売に備えた柔軟な設計

---

## 🎯 目標

### Phase 1: ポートフォリオ完成（最優先）
**ゴール**: 技術力をアピールできる「見せられる」状態にする

- ✅ MVP機能が動作する
- ✅ デモ環境が充実している
- ✅ ドキュメントが整っている
- ✅ テストカバレッジが高い（80%以上）
- ✅ UI/UXが洗練されている

### Phase 2: 販売準備（後回しOK）
**ゴール**: SaaS型/買い切り型どちらでも販売できる柔軟性

- ✅ 販売用の設定機能（プラン制限など）
- ✅ セキュリティ強化（RLS、レート制限）
- ✅ パフォーマンス最適化
- ✅ 運用ドキュメント

---

## 📊 現状評価

### ✅ 完了済み（約70%完成！）

#### 基盤
- [x] CI/CD構築（GitHub Actions）
- [x] Prisma + Supabase セットアップ
- [x] 環境変数管理
- [x] マルチテナント設計（`tenant_id`）

#### 認証
- [x] ユーザー登録・ログイン
- [x] 管理者ログイン
- [x] セキュリティヘッダー

#### 予約機能（ユーザー側）
- [x] メニュー一覧表示
- [x] 予約カレンダー（空き状況）
- [x] 予約登録
- [x] 予約変更
- [x] 予約キャンセル
- [x] 予約確認メール
- [x] マイページ（予約一覧）

#### 管理機能（店舗側）
- [x] 管理者ダッシュボード（統計）
- [x] 予約一覧・手動追加・編集・削除
- [x] スタッフ管理（CRUD）
- [x] スタッフシフト設定
- [x] メニュー管理（CRUD）

#### テスト・品質
- [x] E2Eテスト拡充（14ファイル）
- [x] セキュリティヘッダー実装
- [x] プロジェクトドキュメント拡充

### 🔶 未完了（ポートフォリオ完成に必要）

#### ポートフォリオ必須（優先度: 最高）
- [ ] **デモデータの充実** - サンプル顧客、予約、メニュー、スタッフ
- [ ] **トップページのブラッシュアップ** - 第一印象が重要
- [ ] **README.md の充実** - 技術スタック、特徴、デモURL、スクリーンショット
- [ ] **Lighthouseスコア最適化** - Performance 90以上
- [ ] **レスポンシブ対応確認** - モバイル/タブレット/デスクトップ

#### 機能完成（優先度: 高）
- [ ] #24: 店舗設定（営業時間・定休日） - 実用性アピール
- [x] #19: 顧客管理（一覧・詳細） - 管理機能の完成度 ✅
- [x] #20: 顧客メモ機能 - CRM機能のアピール ✅

#### 品質向上（優先度: 中）
- [ ] #29: コンポーネント整理 - コード品質アピール
- [ ] #30: API仕様書作成 - 設計力アピール
- [ ] 単体テストカバレッジ確認 - 80%以上

#### 拡張機能（優先度: 低 - なくてもOK）
- [ ] #25: リマインダーメール自動送信
- [ ] #26: 分析レポート（予約推移）
- [ ] #27: リピート率分析

### 🚀 販売準備（Phase 2 - 後回し）
- [ ] #77-80: システム設定（プラン制限の基盤）
- [ ] #63-67: セキュリティ強化（レート制限、CSRF、パスワードポリシー）
- [ ] #68-71: パフォーマンス最適化（N+1、インデックス、トランザクション）
- [ ] Row Level Security (RLS) 実装
- [ ] サブドメインルーティング（SaaS版）
- [ ] 買い切り版パッケージング（Docker Compose）

---

## 📅 実装スケジュール（ポートフォリオ完成）

### Week 1: デモ環境整備 + UI/UX洗練

#### Day 1-2: デモデータ充実
- [ ] `prisma/seed.ts` の作成・拡充
  - サンプル顧客（5-10人）
  - サンプルスタッフ（3-5人）
  - サンプルメニュー（10-15種類）
  - サンプル予約（過去・未来・キャンセル済みなど）
- [ ] デモ環境のデプロイ（demo-restaurant テナント）

#### Day 3-4: トップページのブラッシュアップ
- [ ] ヒーローセクションのデザイン改善
- [ ] 機能紹介セクション追加
- [ ] スクリーンショット・GIF動画の追加
- [ ] CTA（Call to Action）ボタンの最適化

#### Day 5-7: レスポンシブ対応 + Lighthouse最適化
- [ ] モバイル表示の確認・調整
- [ ] タブレット表示の確認・調整
- [ ] 画像最適化（Next.js Image使用）
- [ ] Lighthouseスコア測定 → Performance 90以上

### Week 2: 機能完成 + ドキュメント整備

#### Day 1-3: 店舗設定機能（#24）
- [ ] Gherkin シナリオ作成
- [ ] Page Object作成
- [ ] E2Eテスト実装
- [ ] API実装（`/api/admin/settings`）
- [ ] UI実装（`/admin/settings`）

#### Day 4-5: 顧客管理機能（#19, #20）✅ 完了
- [x] Gherkin シナリオ作成 ✅
- [x] E2Eテスト実装 ✅
- [x] API実装（`/api/admin/customers`）✅
- [x] UI実装（`/admin/customers`）✅

#### Day 6-7: README + ドキュメント整備
- [ ] README.md の充実
  - プロジェクト概要
  - 技術スタック（バッジ付き）
  - 主要機能（スクリーンショット付き）
  - デモURL
  - セットアップ手順
  - テスト実行方法
- [ ] API仕様書作成（#30）
- [ ] アーキテクチャ図の追加

### Week 3: 品質向上 + 最終調整

#### Day 1-2: コンポーネント整理（#29）
- [ ] 重複コードの削減
- [ ] コンポーネント分割
- [ ] ディレクトリ構造の最適化

#### Day 3-4: テストカバレッジ確認
- [ ] 単体テストカバレッジ測定
- [ ] 不足箇所のテスト追加
- [ ] カバレッジ80%以上を達成

#### Day 5-7: 最終チェック + デプロイ
- [ ] 全E2Eテスト実行 → Pass確認
- [ ] Lint/TypeScriptエラー0件確認
- [ ] 本番デプロイ（Vercel Production）
- [ ] デモ動画・スクリーンショット撮影
- [ ] ポートフォリオサイトへの掲載

---

## 📋 ポートフォリオ完成チェックリスト

### 機能面
- [ ] ユーザーが予約登録・変更・キャンセルできる
- [ ] 管理者が予約・顧客・スタッフ・メニューを管理できる
- [ ] ダッシュボードで統計が見られる
- [ ] メール通知が機能する
- [ ] 店舗設定が変更できる

### 品質面
- [ ] E2Eテストが全てPass（主要フロー100%カバー）
- [ ] 単体テストカバレッジ80%以上
- [ ] Lighthouseスコア: Performance 90以上
- [ ] TypeScriptエラー0件
- [ ] ESLintエラー0件

### デザイン面
- [ ] レスポンシブ対応（モバイル・タブレット・デスクトップ）
- [ ] 統一されたカラーパレット
- [ ] ローディング・エラー表示
- [ ] アクセシビリティ（aria-label、セマンティックHTML）

### ドキュメント面
- [ ] README.mdが充実している
- [ ] API仕様書が存在する
- [ ] セットアップ手順が明確
- [ ] アーキテクチャ図が存在する

### デモ環境
- [ ] デモデータが充実している
- [ ] デモURLが公開されている
- [ ] スクリーンショット・動画がある
- [ ] 第三者が触って理解できる

---

## 🔮 Phase 2: 販売準備（ポートフォリオ完成後）

### 販売を見据えて「今から」設計に入れておくべきこと

#### 1. プラン制限の基盤（環境変数で制御）

**今すぐ実装**: 環境変数による制限の「仕組み」だけ入れる

```typescript
// src/lib/limits.ts（新規作成）
export function getStaffLimit(): number {
  return parseInt(process.env.MAX_STAFF_COUNT || '999');
}

export function getReservationMonthlyLimit(): number {
  return parseInt(process.env.MAX_RESERVATION_PER_MONTH || '999999');
}

export function isCustomBrandingEnabled(): boolean {
  return process.env.ENABLE_CUSTOM_BRANDING === 'true';
}

// 使用例（スタッフ登録時）
const currentStaffCount = await prisma.restaurantStaff.count({
  where: { tenantId, isActive: true },
});

if (currentStaffCount >= getStaffLimit()) {
  throw new Error('スタッフ数の上限に達しています');
}
```

**メリット**:
- ✅ コード変更なしでプラン制御可能
- ✅ ポートフォリオ版は制限なし（`MAX_STAFF_COUNT=999`）
- ✅ SaaS版は制限あり（`MAX_STAFF_COUNT=10`）

#### 2. テナントIDの動的取得（将来のマルチテナント対応）

**今すぐ実装**: テナントID取得ロジックを関数化

```typescript
// src/lib/tenant.ts（新規作成）
export function getTenantId(request?: Request): string {
  const multiTenantMode = process.env.MULTI_TENANT_MODE === 'true';

  if (!multiTenantMode) {
    // ポートフォリオ版・買い切り版: 固定
    return process.env.TENANT_ID || 'demo-restaurant';
  }

  // SaaS版: サブドメインから取得（将来実装）
  if (!request) {
    return 'demo-restaurant'; // fallback
  }

  const hostname = request.headers.get('host') || '';
  const subdomain = hostname.split('.')[0];
  return subdomain;
}

// 既存のAPI全体でこの関数を使う
const tenantId = getTenantId(request);
```

**メリット**:
- ✅ 今はシングルテナントとして動作
- ✅ 将来、環境変数1つでマルチテナントに切り替え可能

#### 3. 設定のカスタマイズ性（#24: 店舗設定）

**今すぐ実装**: 店舗設定機能を充実させる

- 営業時間・定休日
- 予約枠の間隔（30分/60分など）
- ブランドカラー（将来的にホワイトラベル対応）
- ロゴ画像（将来的にアップロード機能）

**メリット**:
- ✅ ポートフォリオとして「カスタマイズ可能」をアピール
- ✅ 将来の販売時にそのまま使える

### 販売準備の優先順位（Phase 2で実装）

#### 最優先（SaaS化に必須）
1. **Row Level Security (RLS)** - データ分離のセキュリティ強化
2. **サブドメインルーティング** - customer-a.yourdomain.com
3. **プラン制限UI** - 上限に達したら警告表示
4. **管理画面（運営者用）** - 全テナント管理、課金管理

#### 高優先（セキュリティ・パフォーマンス）
5. **APIレート制限** (#63)
6. **CSRF保護強化** (#64)
7. **N+1問題修正** (#68)
8. **複合インデックス追加** (#69)

#### 中優先（買い切り版対応）
9. **Docker Compose構成** - VPS版のテンプレート
10. **セットアップスクリプト** - 1コマンドで環境構築
11. **納品用ドキュメント** - 顧客向けマニュアル

---

## 🎨 ポートフォリオとしてのアピールポイント

### 技術力
- ✅ **モダンな技術スタック**: Next.js 16, React 19, Prisma 7, Supabase
- ✅ **ATDD/BDD開発**: Gherkin → E2E → 実装
- ✅ **高いテストカバレッジ**: E2E + 単体テスト 80%以上
- ✅ **型安全性**: TypeScript strict mode
- ✅ **パフォーマンス**: Lighthouse 90以上

### 設計力
- ✅ **マルチテナント設計**: 将来の拡張を見据えた設計
- ✅ **クリーンアーキテクチャ**: レイヤー分離
- ✅ **セキュリティ**: セキュリティヘッダー、認証・認可
- ✅ **スケーラビリティ**: Vercel + Supabase

### 実用性
- ✅ **実際に使えるシステム**: デモではなく実用レベル
- ✅ **業務理解**: 予約システムの実務フロー理解
- ✅ **UX配慮**: ローディング・エラー表示、レスポンシブ

### ドキュメント力
- ✅ **充実したドキュメント**: README, API仕様書, アーキテクチャ図
- ✅ **保守性**: コメント、型定義、テスト

---

## 📊 成果物イメージ

### ポートフォリオサイトでの掲載例

```markdown
# レストラン予約管理システム

## 概要
美容室・歯科医院・整体院など、多業種対応の予約管理システム。
Next.js 16 + Supabaseで構築した、実用レベルのSaaSプロダクト。

## 技術スタック
![Next.js](https://img.shields.io/badge/Next.js-16-black)
![React](https://img.shields.io/badge/React-19-blue)
![TypeScript](https://img.shields.io/badge/TypeScript-5-blue)
![Prisma](https://img.shields.io/badge/Prisma-7-green)
![Supabase](https://img.shields.io/badge/Supabase-PostgreSQL-green)

## デモ
🔗 [デモサイトを見る](https://reserve-system.vercel.app)

## 主要機能
- ✅ 予約管理（登録・変更・キャンセル）
- ✅ 顧客管理・スタッフ管理・メニュー管理
- ✅ ダッシュボード（統計表示）
- ✅ メール通知（予約確認・リマインダー）
- ✅ 管理者権限制御

## 技術的な特徴
- **テスト駆動開発**: E2Eテスト + 単体テスト（カバレッジ80%以上）
- **マルチテナント設計**: 将来のSaaS化を見据えた設計
- **型安全性**: TypeScript strict mode
- **パフォーマンス**: Lighthouse Performance 90以上

## スクリーンショット
[予約カレンダー画像]
[管理者ダッシュボード画像]
[マイページ画像]

## リポジトリ
🔗 [GitHubリポジトリ](https://github.com/xxx/reserve-system)
```

---

## 🚀 次のアクション

### 今すぐやるべきこと（優先度順）

1. **デモデータの充実** (1-2日)
   - `prisma/seed.ts` の作成・拡充
   - サンプル顧客、スタッフ、メニュー、予約の投入

2. **トップページのブラッシュアップ** (1-2日)
   - ヒーローセクション改善
   - スクリーンショット追加

3. **店舗設定機能の実装** (#24) (2-3日)
   - 営業時間・定休日・予約枠設定
   - 将来の販売にも必須の機能

4. **README.md の充実** (1日)
   - 技術スタック、特徴、デモURL、スクリーンショット

5. **Lighthouseスコア最適化** (1日)
   - Performance 90以上を目指す

6. **最終チェック + デプロイ** (1日)
   - 全E2Eテスト Pass確認
   - 本番デプロイ

**合計: 約2週間でポートフォリオ完成！**

---

## 💡 販売準備は焦らない

ポートフォリオ完成が最優先。販売準備（Phase 2）は、以下のタイミングで：

- ✅ ポートフォリオとして公開できた
- ✅ 就職活動で活用できた
- ✅ フィードバックを収集できた

**この段階で初めて販売を検討する**のが賢明です。

---

**まずはポートフォリオ完成に集中しましょう！**
