# 🚀 開発開始ガイド - 次にやること

このドキュメントは、mockページから実装へ移行するための完全なロードマップです。

---

## ✅ 完了したこと

- [x] Mockページ作成（5ページ）
  - トップページ
  - 予約カレンダー
  - ログイン/新規登録
  - 管理者ダッシュボード
- [x] 共通コンポーネント作成（Header, Footer, Button, Card, AdminSidebar）
- [x] 開発プロセス設計書作成
- [x] GitHub Issueテンプレート作成
- [x] 機能リストのIssue化（30件）
- [x] ATDD/BDD環境セットアップ計画

---

## 📋 次にやること（優先順位順）

### 🎯 Phase 1: 即座に実施（今日）

#### 1. GitHubリポジトリ初期化（10分）
```bash
cd /Users/a-aoki/indivisual/2026/portpfolio/reserve-system
git init
git add .
git commit -m "Initial commit: Mock pages and project setup

- Add Next.js 16 with Tailwind CSS v4
- Add mock pages (home, booking, login, register, admin dashboard)
- Add shared components (Header, Footer, Button, Card, AdminSidebar)
- Add project documentation
- Add GitHub Issue templates
- Add development process design"

git branch -M main

# GitHubで新しいリポジトリを作成後
git remote add origin https://github.com/[your-username]/reserve-system.git
git push -u origin main
```

#### 2. GitHubラベル作成（5分）
リポジトリ > Issues > Labels から以下を作成：
- `feature` (#10B981)
- `bug` (#EF4444)
- `refactor` (#F59E0B)
- `test` (#3B82F6)
- `docs` (#9CA3AF)
- `tech-debt` (#F97316)
- `priority-high` (#DC2626)
- `priority-medium` (#FBBF24)
- `priority-low` (#34D399)
- `sprint-1` (#6366F1)
- `sprint-2` (#8B5CF6)
- `sprint-3` (#EC4899)
- `sprint-4` (#14B8A6)

#### 3. GitHub Projectsボード作成（5分）
- プロジェクト名: "予約システム開発"
- ビュー: カンバンボード
- カラム: Backlog, Sprint 1, In Progress, Review, Done

---

### 🔨 Phase 2: Week 1 - 開発基盤構築（Sprint 1）

#### Day 1: テスト環境セットアップ（Issue #1）

**作業内容**:
```bash
cd reserve-app

# 1. パッケージインストール
npm install -D @testing-library/react @testing-library/jest-dom @testing-library/user-event
npm install -D @playwright/test
npm install -D jest jest-environment-jsdom
npm install -D msw
npm install -D @types/jest

# 2. 設定ファイル作成
# - jest.config.js
# - jest.setup.js
# - playwright.config.ts
# - src/__tests__/mocks/handlers.ts
# - src/__tests__/mocks/server.ts

# 3. サンプルテスト作成
# - src/__tests__/unit/Button.test.tsx
# - src/__tests__/e2e/home.spec.ts

# 4. テスト実行
npm run test
npm run test:e2e
```

**成功基準**:
- ✅ `npm run test` が通る
- ✅ `npm run test:e2e` が通る
- ✅ カバレッジレポートが生成される

---

#### Day 2: Prisma + Supabase接続（Issue #2）

**作業内容**:
```bash
# 1. Prismaインストール
npm install @prisma/client
npm install -D prisma

# 2. Prisma初期化
npx prisma init

# 3. schema.prisma作成（詳細は ATDD-BDD環境セットアップ.md参照）

# 4. .env.local設定
# DATABASE_URL="postgresql://..."
# NEXT_PUBLIC_SUPABASE_URL="..."
# NEXT_PUBLIC_SUPABASE_ANON_KEY="..."

# 5. マイグレーション実行
npx prisma migrate dev --name init
npx prisma generate

# 6. 接続テスト
npx prisma studio  # データベース確認
```

**成功基準**:
- ✅ Prisma Clientが生成される
- ✅ Supabaseに接続できる
- ✅ テーブルが作成される

---

#### Day 3: ESLint + Prettier + Husky設定（Issue #3）

**作業内容**:
```bash
# 1. パッケージインストール
npm install -D prettier eslint-config-prettier
npm install -D husky lint-staged

# 2. 設定ファイル作成
# - .eslintrc.json
# - .prettierrc
# - .husky/pre-commit

# 3. Husky初期化
npx husky-init && npm install

# 4. package.jsonにlint-staged設定追加

# 5. 動作確認
npm run lint
git add .
git commit -m "test"  # pre-commitフックが動作するか確認
```

---

#### Day 4: CI/CD構築（Issue #4）

**作業内容**:
```bash
# 1. GitHub Actionsワークフロー作成
# - .github/workflows/test.yml
# - .github/workflows/lint.yml
# - .github/workflows/deploy.yml（Vercel自動デプロイ）

# 2. Vercel連携
# Vercelダッシュボードで
# - GitHubリポジトリ連携
# - 環境変数設定

# 3. PR作成してCI動作確認
git checkout -b feature/ci-setup
git add .
git commit -m "Add CI/CD workflows"
git push origin feature/ci-setup
# GitHub上でPR作成 → CIが動くか確認
```

**成功基準**:
- ✅ PR作成時に自動テスト実行
- ✅ mainマージ時に自動デプロイ
- ✅ テスト失敗時はマージブロック

---

#### Day 5-6: ユーザー認証機能（Issue #5, #6）

**BDDシナリオ作成**:
```gherkin
Feature: ユーザー新規登録
  As a customer
  I want to register for an account
  So that I can make reservations

  Scenario: 新規登録成功
    Given 新規登録ページにアクセスしている
    When 名前に "山田太郎" を入力する
    And メールアドレスに "yamada@example.com" を入力する
    And パスワードに "password123" を入力する
    And "アカウントを作成" ボタンをクリックする
    Then 確認メールが送信される
    And ログインページにリダイレクトされる
```

**TDDサイクル**:
1. **Red**: E2Eテスト作成（失敗する）
2. **Red**: 単体テスト作成（失敗する）
3. **Green**: 機能実装（テストが通る）
4. **Refactor**: コード整理

**実装手順**:
```bash
# 1. Supabase Auth設定
# Supabaseダッシュボードで
# - Authentication > Settings > Email Auth を有効化
# - Email Templates設定

# 2. E2Eテスト作成
# src/__tests__/e2e/auth/register.spec.ts

# 3. API実装
# src/app/api/auth/register/route.ts

# 4. フォーム実装
# src/app/register/page.tsx（既存を機能実装に置き換え）

# 5. バリデーション実装
# src/lib/validations/auth.ts（Zod使用）

# 6. テスト実行
npm run test:e2e
```

---

#### Day 7: Sprint Review + Retrospective

**振り返り**:
- ✅ 完了したIssue数
- ✅ テストカバレッジ
- ⚠️ 技術的負債の確認
- 📝 改善点の洗い出し

---

### 🚀 Phase 3: Week 2以降（Sprint 2-4）

#### Sprint 2: 予約機能（ユーザー側）
- Issue #8-14: メニュー表示、予約カレンダー、予約登録、マイページ

#### Sprint 3: 管理機能（店舗側）
- Issue #15-22: ダッシュボード、予約管理、顧客管理、スタッフ管理

#### Sprint 4: 拡張機能
- Issue #23-30: メニュー管理、リマインダー、分析レポート

---

## 📊 開発の進め方（毎日のルーチン）

### 朝（9:00 - 10:00）
1. GitHub Issueから今日のタスクを選択
2. ブランチ作成: `git checkout -b feature/issue-X-description`
3. BDDシナリオ確認・作成

### 午前（10:00 - 12:00）
1. E2Eテスト作成（Red）
2. 単体テスト作成（Red）
3. 実装開始

### 午後（13:00 - 17:00）
1. 実装継続（Green）
2. リファクタリング（Refactor）
3. テスト実行・カバレッジ確認
4. コミット: `git commit -m "[FEATURE] #X: 機能名"`

### 夕方（17:00 - 18:00）
1. PR作成
2. AIによるコードレビュー
3. CIの結果確認
4. 翌日のタスク確認

---

## 🤖 生成AI活用のコツ

### テスト生成プロンプト例
```
以下のユーザーストーリーに対して、Playwrightの E2E テストを生成してください：

ユーザーストーリー:
As a customer
I want to register for an account
So that I can make reservations

受入基準:
- 名前、メール、パスワードを入力できる
- 送信後、確認メールが送信される
- ログインページにリダイレクトされる

コード規約:
- Page Object Modelを使用
- describe, it を使用
- async/await を使用
```

### 実装生成プロンプト例
```
以下のテストが通るように、Next.js App Router の API Route を実装してください：

[テストコードを貼り付け]

要件:
- Supabase Auth を使用
- Zodでバリデーション
- エラーハンドリング
- TypeScript strict mode
```

### リファクタリングプロンプト例
```
以下のコードをリファクタリングしてください。観点：
- 関数を小さく（10行以内）
- DRY原則
- 単一責任の原則
- わかりやすい変数名

[コードを貼り付け]
```

---

## ✅ 開発開始前のチェックリスト

- [ ] GitHubリポジトリ作成完了
- [ ] ラベル設定完了
- [ ] Projectsボード作成完了
- [ ] Issue #1-7をBacklogに追加完了
- [ ] Supabaseプロジェクト作成完了
- [ ] .env.example確認完了
- [ ] 開発プロセス設計書を読んだ
- [ ] ATDD/BDD環境セットアップガイドを読んだ

---

## 📚 参考ドキュメント

- `開発プロセス設計.md` - 開発の全体像
- `ATDD-BDD環境セットアップ.md` - テスト環境の詳細
- `GitHub-Issues一覧.md` - 全Issue一覧
- `機能一覧とページ設計.md` - 機能仕様
- `.github/ISSUE_TEMPLATE/` - Issueテンプレート

---

## 🚦 現在の状態

```
✅ Mock完成（5ページ）
✅ ドキュメント完備
✅ 開発プロセス設計完了
✅ Issueテンプレート作成完了

▶️ 次: GitHubリポジトリ初期化
▶️ 次: Issue #1（テスト環境セットアップ）開始
```

---

## 💬 質問があれば

- GitHub Issueの登録方法は？
- テスト環境のセットアップで詰まった
- BDDシナリオの書き方がわからない
- 特定の機能の実装方針を相談したい

いつでも聞いてください！🚀
