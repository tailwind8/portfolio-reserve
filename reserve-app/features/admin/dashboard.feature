Feature: 管理者ダッシュボード
  As a store admin
  I want to view key metrics on a dashboard
  So that I can understand business performance

  Background:
    Given 管理者がログインしている

  Scenario: 統計データを表示する
    Given 管理者がダッシュボードにアクセスしている
    When ページが読み込まれる
    Then 本日の予約件数が表示される
    And 今月の予約件数が表示される
    And 今月の売上が表示される
    And リピート率が表示される
    And 各統計に前週比の変化率が表示される

  Scenario: 本日の予約一覧を表示する
    Given 管理者がダッシュボードにアクセスしている
    And 本日の予約が3件存在する
    When ページが読み込まれる
    Then 本日の予約一覧が表示される
    And 各予約に時間が表示される
    And 各予約に顧客名が表示される
    And 各予約にメニューが表示される
    And 各予約にスタッフ名が表示される
    And 各予約にステータスバッジが表示される

  Scenario: 本日の予約がない場合
    Given 管理者がダッシュボードにアクセスしている
    And 本日の予約が0件である
    When ページが読み込まれる
    Then "本日の予約はありません"というメッセージが表示される

  Scenario: 週間予約状況グラフを表示する
    Given 管理者がダッシュボードにアクセスしている
    When ページが読み込まれる
    Then 週間予約状況のグラフが表示される
    And 月曜から日曜までの7日分のラベルが表示される
    And 各曜日の予約件数に応じたバーが表示される

  Scenario: スタッフ出勤状況を表示する
    Given 管理者がダッシュボードにアクセスしている
    When ページが読み込まれる
    Then スタッフ出勤状況セクションが表示される
    And 各スタッフの名前が表示される
    And 各スタッフの状態（勤務中/休憩中）が表示される
    And 各スタッフの対応可否を示すインジケータが表示される

  Scenario: クイックアクションボタンを表示する
    Given 管理者がダッシュボードにアクセスしている
    When ページが読み込まれる
    Then "新規予約を追加"ボタンが表示される
    And "顧客を追加"ボタンが表示される

  Scenario: 最近の活動を表示する
    Given 管理者がダッシュボードにアクセスしている
    When ページが読み込まれる
    Then 最近の活動セクションが表示される
    And 各活動にアイコンが表示される
    And 各活動に操作内容が表示される
    And 各活動に経過時間が表示される

  Scenario: ローディング状態を表示する
    Given 管理者がダッシュボードにアクセスする
    When APIからデータを取得中である
    Then "読み込み中..."というメッセージが表示される
    And 統計データは表示されない

  Scenario: エラー状態を表示する
    Given 管理者がダッシュボードにアクセスする
    When APIからデータ取得に失敗する
    Then エラーメッセージが赤色の背景で表示される
    And 統計データは表示されない

  Scenario: モバイル表示に対応する
    Given 管理者がスマートフォンでアクセスしている
    When ダッシュボードを表示する
    Then モバイル用のレイアウトが適用される
    And 統計カードが縦に並んで表示される
    And すべての主要情報が表示される
