# language: ja
Feature: 店舗設定
  As a store admin
  I want to configure store settings
  So that I can manage business hours and holidays

  Background:
    Given 管理者がログインしている

  Scenario: 店舗設定ページを表示（ハッピーパス）
    Given 管理者が店舗設定ページにアクセスしている
    When ページが読み込まれる
    Then 基本情報セクションが表示される
    And 営業時間設定セクションが表示される
    And 定休日設定セクションが表示される
    And 予約設定セクションが表示される

  Scenario: 基本情報を編集（ハッピーパス）
    Given 管理者が店舗設定ページにアクセスしている
    When "基本情報を編集"ボタンをクリックする
    Then 基本情報編集モーダルが表示される
    When 店舗名を"サンプル美容室"に変更する
    And 電話番号を"03-1234-5678"に変更する
    And 住所を"東京都渋谷区..."に変更する
    And "保存"ボタンをクリックする
    Then 基本情報が更新される
    And 成功メッセージが表示される

  Scenario: 営業時間を設定（ハッピーパス）
    Given 管理者が店舗設定ページにアクセスしている
    When "営業時間を設定"ボタンをクリックする
    Then 営業時間設定モーダルが表示される
    When 月曜日の開始時間"09:00"を設定する
    And 月曜日の終了時間"18:00"を設定する
    And 月曜日のチェックボックスをチェックする
    And "保存"ボタンをクリックする
    Then 営業時間が保存される
    And 成功メッセージが表示される

  Scenario: 営業時間を設定（複数曜日）
    Given 管理者が店舗設定ページにアクセスしている
    When "営業時間を設定"ボタンをクリックする
    Then 営業時間設定モーダルが表示される
    When 月曜日の開始時間"09:00"を設定する
    And 月曜日の終了時間"18:00"を設定する
    And 月曜日のチェックボックスをチェックする
    And 火曜日の開始時間"10:00"を設定する
    And 火曜日の終了時間"19:00"を設定する
    And 火曜日のチェックボックスをチェックする
    And "保存"ボタンをクリックする
    Then 営業時間が保存される
    And 月曜日と火曜日の営業時間が設定される

  Scenario: 営業時間設定失敗（終了時間が開始時間より前）
    Given 管理者が店舗設定ページにアクセスしている
    When "営業時間を設定"ボタンをクリックする
    Then 営業時間設定モーダルが表示される
    When 月曜日の開始時間"18:00"を設定する
    And 月曜日の終了時間"09:00"を設定する
    And "保存"ボタンをクリックする
    Then エラーメッセージ"終了時間は開始時間より後である必要があります"が表示される
    And 営業時間は保存されない

  Scenario: 定休日を設定（ハッピーパス）
    Given 管理者が店舗設定ページにアクセスしている
    When "定休日を設定"ボタンをクリックする
    Then 定休日設定モーダルが表示される
    When 火曜日のチェックボックスをチェックする
    And "保存"ボタンをクリックする
    Then 定休日が保存される
    And 成功メッセージが表示される
    And 火曜日が定休日として設定される

  Scenario: 定休日を設定（複数曜日）
    Given 管理者が店舗設定ページにアクセスしている
    When "定休日を設定"ボタンをクリックする
    Then 定休日設定モーダルが表示される
    When 火曜日のチェックボックスをチェックする
    And 水曜日のチェックボックスをチェックする
    And "保存"ボタンをクリックする
    Then 定休日が保存される
    And 火曜日と水曜日が定休日として設定される

  Scenario: 予約受付可能時間を設定
    Given 管理者が店舗設定ページにアクセスしている
    When "予約設定"セクションを開く
    Then 予約受付可能時間設定が表示される
    When 予約受付開始時間"08:00"を設定する
    And 予約受付終了時間"20:00"を設定する
    And "保存"ボタンをクリックする
    Then 予約受付可能時間が保存される
    And 成功メッセージが表示される

  Scenario: 予約間隔を設定
    Given 管理者が店舗設定ページにアクセスしている
    When "予約設定"セクションを開く
    Then 予約間隔設定が表示される
    When 予約間隔で"30分"を選択する
    And "保存"ボタンをクリックする
    Then 予約間隔が保存される
    And 成功メッセージが表示される

  Scenario: 予約間隔を設定（1時間）
    Given 管理者が店舗設定ページにアクセスしている
    When "予約設定"セクションを開く
    Then 予約間隔設定が表示される
    When 予約間隔で"1時間"を選択する
    And "保存"ボタンをクリックする
    Then 予約間隔が保存される
    And 予約カレンダーで1時間間隔で時間帯が表示される

  Scenario: 予約可能日数を設定
    Given 管理者が店舗設定ページにアクセスしている
    When "予約設定"セクションを開く
    Then 予約可能日数設定が表示される
    When 予約可能日数に"90"を入力する
    And "保存"ボタンをクリックする
    Then 予約可能日数が保存される
    And 成功メッセージが表示される
    And 予約カレンダーで90日先まで予約可能になる

  Scenario: 設定変更の取り消し
    Given 管理者が店舗設定ページにアクセスしている
    When "営業時間を設定"ボタンをクリックする
    Then 営業時間設定モーダルが表示される
    When 月曜日の開始時間"09:00"を設定する
    And 月曜日の終了時間"18:00"を設定する
    And "キャンセル"ボタンをクリックする
    Then 営業時間設定モーダルが閉じる
    And 変更は保存されない

  Scenario: 設定の初期値表示
    Given 管理者が店舗設定ページにアクセスしている
    When ページが読み込まれる
    Then 現在の基本情報が表示される
    And 現在の営業時間が表示される
    And 現在の定休日が表示される
    And 現在の予約設定が表示される

