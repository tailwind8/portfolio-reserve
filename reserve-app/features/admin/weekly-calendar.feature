# language: ja
機能: 管理者向け週間カレンダーでの予約管理

  ユーザーストーリー:
  As a 店舗管理者
  I want to 週間カレンダーで予約状況と空き時間を一目で確認したい
  So that 電話予約の受付効率を向上させ、予約管理を効率化できる

  背景:
    前提 システムに以下のメニューが登録されている:
      | メニュー名 | 所要時間 | 料金   |
      | カット     | 60分     | 5000円 |
      | カラー     | 90分     | 8000円 |
      | パーマ     | 120分    | 12000円 |
    かつ システムに以下のスタッフが登録されている:
      | スタッフ名 |
      | 田中       |
      | 佐藤       |
    かつ 管理者でログインしている
    かつ 2026年1月6日（月）から1月12日（日）までの週である
    かつ 以下の予約が登録されている:
      | 顧客名 | 日付       | 時間  | メニュー | スタッフ | ステータス |
      | 山田   | 2026-01-06 | 09:00 | カット   | 田中     | 確定済み   |
      | 鈴木   | 2026-01-07 | 10:00 | カラー   | 佐藤     | 保留中     |
      | 伊藤   | 2026-01-08 | 14:00 | パーマ   | 田中     | 確定済み   |

  シナリオ: 管理者が予約管理ページにアクセスするとデフォルトで一覧表示になる
    前提 予約管理ページにアクセスする
    もし ページが読み込まれる
    ならば 予約一覧が表示される
    かつ 表示モード「一覧表示」がアクティブである
    かつ 「カレンダー表示」タブが表示される

  シナリオ: カレンダー表示タブをクリックして週間カレンダーを表示する
    前提 予約管理ページにアクセスする
    もし 「カレンダー表示」タブをクリックする
    ならば 週間カレンダーが表示される
    かつ 表示モード「カレンダー表示」がアクティブである
    かつ 2026年1月6日から1月12日の週が表示される
    かつ 予約一覧が非表示になる

  シナリオ: 週間カレンダーで予約状況を確認する
    前提 予約管理ページにアクセスする
    かつ 「カレンダー表示」タブをクリックする
    もし 週間カレンダーが表示される
    ならば 月曜日09:00のブロックに「山田」と表示される
    かつ 月曜日09:00のブロックに「カット」と表示される
    かつ 月曜日09:00のブロックが青色で表示される（確定済み）
    かつ 火曜日10:00のブロックに「鈴木」と表示される
    かつ 火曜日10:00のブロックが黄色で表示される（保留中）
    かつ 水曜日14:00のブロックに「伊藤」と表示される

  シナリオ: 週間カレンダーで空き時間が緑色で表示される
    前提 予約管理ページにアクセスする
    かつ 「カレンダー表示」タブをクリックする
    もし 週間カレンダーが表示される
    ならば 月曜日10:00のブロックが緑色で表示される
    かつ 月曜日10:00のブロックに「[空]」と表示される
    かつ 火曜日09:00のブロックが緑色で表示される
    かつ 水曜日09:00のブロックが緑色で表示される

  シナリオ: 予約ブロックをクリックして詳細を確認する
    前提 予約管理ページにアクセスする
    かつ 「カレンダー表示」タブをクリックする
    かつ 週間カレンダーが表示される
    もし 月曜日09:00の予約ブロック「山田」をクリックする
    ならば 予約詳細モーダルが表示される
    かつ モーダルに顧客名「山田」が表示される
    かつ モーダルにメニュー「カット」が表示される
    かつ モーダルにスタッフ「田中」が表示される
    かつ モーダルにステータス「確定済み」が表示される
    かつ モーダルに「編集」ボタンが表示される
    かつ モーダルに「キャンセル」ボタンが表示される

  シナリオ: 空き時間ブロックをクリックして新規予約を追加する
    前提 予約管理ページにアクセスする
    かつ 「カレンダー表示」タブをクリックする
    かつ 週間カレンダーが表示される
    もし 月曜日10:00の空きブロックをクリックする
    ならば 新規予約追加モーダルが表示される
    かつ モーダルの日付フィールドに「2026-01-06」が自動入力される
    かつ モーダルの時間フィールドに「10:00」が自動入力される
    かつ モーダルに顧客選択フィールドが表示される
    かつ モーダルにメニュー選択フィールドが表示される
    かつ モーダルにスタッフ選択フィールドが表示される

  シナリオ: スタッフ別フィルターで予約を絞り込む
    前提 予約管理ページにアクセスする
    かつ 「カレンダー表示」タブをクリックする
    かつ 週間カレンダーが表示される
    もし スタッフフィルターで「田中」を選択する
    ならば 月曜日09:00のブロックに「山田」と表示される
    かつ 水曜日14:00のブロックに「伊藤」と表示される
    かつ 火曜日10:00のブロック「鈴木」が表示されない

  シナリオ: メニュー別フィルターで予約を絞り込む
    前提 予約管理ページにアクセスする
    かつ 「カレンダー表示」タブをクリックする
    かつ 週間カレンダーが表示される
    もし メニューフィルターで「カット」を選択する
    ならば 月曜日09:00のブロックに「山田」と表示される
    かつ 火曜日10:00のブロック「鈴木」が表示されない
    かつ 水曜日14:00のブロック「伊藤」が表示されない

  シナリオ: ステータス別フィルターで予約を絞り込む
    前提 予約管理ページにアクセスする
    かつ 「カレンダー表示」タブをクリックする
    かつ 週間カレンダーが表示される
    もし ステータスフィルターで「確定済み」を選択する
    ならば 月曜日09:00のブロックに「山田」と表示される
    かつ 水曜日14:00のブロックに「伊藤」と表示される
    かつ 火曜日10:00のブロック「鈴木」が表示されない

  シナリオ: 次週に移動する
    前提 予約管理ページにアクセスする
    かつ 「カレンダー表示」タブをクリックする
    かつ 週間カレンダーが表示される
    もし 「次週」ボタンをクリックする
    ならば 2026年1月13日から1月19日の週が表示される
    かつ 週のタイトルが「2026年1月13日 〜 1月19日」と表示される

  シナリオ: 前週に移動する
    前提 予約管理ページにアクセスする
    かつ 「カレンダー表示」タブをクリックする
    かつ 週間カレンダーが表示される
    もし 「前週」ボタンをクリックする
    ならば 2025年12月30日から2026年1月5日の週が表示される
    かつ 週のタイトルが「2025年12月30日 〜 1月5日」と表示される

  シナリオ: 一覧表示に戻る
    前提 予約管理ページにアクセスする
    かつ 「カレンダー表示」タブをクリックする
    かつ 週間カレンダーが表示される
    もし 「一覧表示」タブをクリックする
    ならば 予約一覧が表示される
    かつ 表示モード「一覧表示」がアクティブである
    かつ 週間カレンダーが非表示になる

  シナリオ: 表示モードがLocalStorageに保存される
    前提 予約管理ページにアクセスする
    かつ 「カレンダー表示」タブをクリックする
    かつ 週間カレンダーが表示される
    もし ページをリロードする
    ならば 週間カレンダーが表示される
    かつ 表示モード「カレンダー表示」がアクティブである

  シナリオ: 休憩時間がグレーで表示される
    前提 予約管理ページにアクセスする
    かつ 「カレンダー表示」タブをクリックする
    かつ 店舗の休憩時間が12:00-13:00である
    もし 週間カレンダーが表示される
    ならば 月曜日12:00のブロックに「休憩時間」と表示される
    かつ 月曜日12:00のブロックがグレーで表示される
    かつ 休憩時間のブロックはクリックできない

  シナリオ: 定休日がグレーで表示される
    前提 予約管理ページにアクセスする
    かつ 「カレンダー表示」タブをクリックする
    かつ 店舗の定休日が日曜日である
    もし 週間カレンダーが表示される
    ならば 日曜日の全ブロックに「[休]」と表示される
    かつ 日曜日の全ブロックがグレーで表示される
    かつ 定休日のブロックはクリックできない

  シナリオ: キャンセル済み予約が薄い赤色で表示される
    前提 予約管理ページにアクセスする
    かつ 以下のキャンセル済み予約が登録されている:
      | 顧客名 | 日付       | 時間  | メニュー | ステータス     |
      | 高橋   | 2026-01-09 | 11:00 | カット   | キャンセル済み |
    かつ 「カレンダー表示」タブをクリックする
    もし 週間カレンダーが表示される
    ならば 木曜日11:00のブロックに「高橋」と表示される
    かつ 木曜日11:00のブロックが薄い赤色で表示される
    かつ 木曜日11:00のブロックに取り消し線が表示される

  シナリオ: 営業時間のみ表示される
    前提 予約管理ページにアクセスする
    かつ 「カレンダー表示」タブをクリックする
    かつ 店舗の営業時間が09:00-18:00である
    もし 週間カレンダーが表示される
    ならば 09:00から18:00の時間帯のみ表示される
    かつ 営業時間外（08:00, 19:00など）は表示されない
