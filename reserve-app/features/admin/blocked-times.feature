# language: ja
機能: 予約ブロック管理
  ホットペッパーや電話予約など、システム外で受け付けた予約に対応し、
  該当時間帯をオンライン予約から除外できるようにする。

  背景:
    前提 管理者アカウントでログインしている
    かつ 管理者ダッシュボードにアクセスしている

  シナリオ: 予約ブロックを追加する
    前提 予約ブロック管理ページにアクセスする
    もし "新規ブロック追加"ボタンをクリックする
    かつ 開始日時に"2026-01-15 14:00"を入力する
    かつ 終了日時に"2026-01-15 15:00"を入力する
    かつ 理由に"ホットペッパー予約"を選択する
    かつ 詳細説明に"山田様の予約"を入力する
    かつ "追加"ボタンをクリックする
    ならば ブロックが一覧に表示される
    かつ 成功メッセージ"予約ブロックを追加しました"が表示される

  シナリオ: ブロックされた時間はオンライン予約できない
    前提 予約ブロック"2026-01-15 14:00 - 15:00"が登録されている
    もし ユーザーとして予約ページにアクセスする
    かつ メニュー"カット"を選択する
    かつ 日付"2026-01-15"を選択する
    ならば 時間スロット"14:00"が選択不可になっている
    かつ 時間スロット"13:00"は選択可能である

  シナリオ: ブロックを編集する
    前提 予約ブロック管理ページにアクセスする
    かつ 既存のブロック"2026-01-15 14:00 - 15:00"が登録されている
    もし 該当ブロックの"編集"ボタンをクリックする
    かつ 終了日時を"2026-01-15 16:00"に変更する
    かつ 詳細説明を"時間延長"に変更する
    かつ "保存"ボタンをクリックする
    ならば ブロックの終了時刻が"16:00"に更新される
    かつ 成功メッセージ"予約ブロックを更新しました"が表示される

  シナリオ: ブロックを削除する
    前提 予約ブロック管理ページにアクセスする
    かつ 既存のブロック"2026-01-15 14:00 - 15:00"が登録されている
    もし 該当ブロックの"削除"ボタンをクリックする
    かつ 確認ダイアログで"削除"を選択する
    ならば ブロックが一覧から削除される
    かつ 成功メッセージ"予約ブロックを削除しました"が表示される

  シナリオ: 終了日時が開始日時より前の場合はエラー
    前提 予約ブロック管理ページにアクセスする
    もし "新規ブロック追加"ボタンをクリックする
    かつ 開始日時に"2026-01-15 15:00"を入力する
    かつ 終了日時に"2026-01-15 14:00"を入力する
    かつ 理由に"ホットペッパー予約"を選択する
    かつ "追加"ボタンをクリックする
    ならば エラーメッセージ"終了日時は開始日時より後にしてください"が表示される
    かつ ブロックは追加されない

  シナリオ: 臨時休業で全日ブロックする
    前提 予約ブロック管理ページにアクセスする
    もし "新規ブロック追加"ボタンをクリックする
    かつ 開始日時に"2026-01-20 09:00"を入力する
    かつ 終了日時に"2026-01-20 18:00"を入力する
    かつ 理由に"臨時休業"を選択する
    かつ 詳細説明に"全スタッフ研修参加"を入力する
    かつ "追加"ボタンをクリックする
    ならば ブロックが一覧に表示される
    もし ユーザーとして予約ページにアクセスする
    かつ メニュー"カット"を選択する
    かつ 日付"2026-01-20"を選択する
    ならば すべての時間スロットが選択不可になっている

  シナリオ: ブロック一覧を日付範囲でフィルタリング
    前提 予約ブロック管理ページにアクセスする
    かつ 複数のブロックが登録されている
      | 開始日時        | 終了日時        | 理由               |
      | 2026-01-15 14:00 | 2026-01-15 15:00 | ホットペッパー予約 |
      | 2026-01-20 09:00 | 2026-01-20 18:00 | 臨時休業          |
      | 2026-02-05 10:00 | 2026-02-05 11:00 | 電話予約          |
    もし 日付範囲"2026-01-01"から"2026-01-31"でフィルタリングする
    ならば 2件のブロックが表示される
    かつ "2026-02-05"のブロックは表示されない
