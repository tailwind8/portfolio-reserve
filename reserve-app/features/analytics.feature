# language: ja
機能: 分析レポート機能
  管理者として、予約データの分析レポートを確認したい
  予約推移やリピート率を可視化することで、経営判断に活用できる

  背景:
    前提 管理者がログインしている
    かつ 過去3ヶ月分の予約データが存在する

  # Issue #26: 予約推移グラフ
  シナリオ: 月別予約推移グラフを表示する
    前提 分析レポートページにアクセスしている
    もし "月別"タブを選択する
    ならば 月別予約推移グラフが表示される
    かつ グラフに過去12ヶ月分のデータが表示される
    かつ 各月の予約件数が表示される

  シナリオ: 週別予約推移グラフを表示する
    前提 分析レポートページにアクセスしている
    もし "週別"タブを選択する
    ならば 週別予約推移グラフが表示される
    かつ グラフに過去8週間分のデータが表示される
    かつ 各週の予約件数が表示される

  シナリオ: 日別予約推移グラフを表示する
    前提 分析レポートページにアクセスしている
    もし "日別"タブを選択する
    ならば 日別予約推移グラフが表示される
    かつ グラフに過去30日分のデータが表示される
    かつ 各日の予約件数が表示される

  # Issue #27: リピート率分析
  シナリオ: リピート率の詳細を表示する
    前提 分析レポートページにアクセスしている
    もし "リピート率"セクションを確認する
    ならば 全体のリピート率が表示される
    かつ 新規顧客数が表示される
    かつ リピート顧客数が表示される
    かつ 新規/リピーター比率の円グラフが表示される

  シナリオ: リピート率の推移を表示する
    前提 分析レポートページにアクセスしている
    もし "リピート率推移"グラフを確認する
    ならば 月別のリピート率推移グラフが表示される
    かつ グラフに過去6ヶ月分のデータが表示される
    かつ リピート率の変化傾向が確認できる

  シナリオ: データが存在しない場合のメッセージ表示
    前提 予約データが1件も存在しない
    かつ 分析レポートページにアクセスしている
    ならば "データがありません"というメッセージが表示される
    かつ グラフは表示されない
